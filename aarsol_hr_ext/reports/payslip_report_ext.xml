<odoo>
    <data>
        <template id="hr_payroll.report_payslip">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.basic_layout">
                        <t t-if="not company">
                            <t t-if="company_id">
                                <t t-set="company" t-value="company_id"/>
                            </t>
                            <t t-elif="o and 'company_id' in o">
                                <t t-set="company" t-value="o.company_id.sudo()"/>
                            </t>
                            <t t-else="else">
                                <t t-set="company" t-value="res_company"/>
                            </t>
                        </t>

                        <div class="header">
                            <div>
                                <div class="row">
                                    <div style="width:13%; height:100px; padding:5px; margin-left:10px; border:0px solid #f2f2f2">
                                        <img alt="..." width="200px" height="200px" class="rounded mb-2 img-thumbnail"
                                             t-att-src="image_data_uri(company.logo)" t-if="company.logo"/>
                                    </div>
                                    <div style="width:84% ;font-size:35px; font-weight:bold; text-align:center">
                                        <div class="col col-12">
                                            <span t-esc="company.name" t-if="company"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="page">
                            <h5 style="text-align:right;">Pay Slip:
                                <span t-esc="o.date_from.strftime('%B/%Y')"/>
                            </h5>

                            <table class="table table-sm table-bordered" style="font-size:12px;">

                                <tr>
                                    <td>
                                        <strong>Employee ID</strong>
                                    </td>
                                    <td>
                                        <span t-field="o.employee_id.code"/>
                                    </td>
                                     <td colspan="2"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Name</strong>
                                    </td>
                                    <td>
                                        <span t-field="o.employee_id.name"/>
                                    </td>

                                    <td>
                                        <strong>Designation</strong>
                                    </td>
                                    <td>
                                        <span t-field="o.employee_id.job_id"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Category</strong>
                                    </td>
                                    <td>
                                        <span t-field="o.employee_id.category_id.name"/>
                                    </td>
                                    <td>
                                        <strong>Payscale</strong>
                                    </td>
                                    <td>
                                        <span t-field="o.payscale_id.name"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>CNIC</strong>
                                    </td>
                                    <td>
                                        <span t-field="o.employee_id.cnic"/>
                                    </td>
                                    <td>
                                        <strong>Department/Campus</strong>
                                    </td>
                                    <td>
                                        <span t-field="o.employee_id.department_id.name"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Reference</strong>
                                    </td>
                                    <td>
                                        <span t-field="o.number"/>
                                    </td>
                                    <td>
                                        <strong>Bank Account</strong>
                                    </td>
                                    <td>
                                        <span t-field="o.employee_id.bank_account_no"/>
                                    </td>
                                </tr>
                            </table>

                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th colspan="5">Pay and Allowances</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="font-size:12px;" t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.salary_rule_id.sequence in (1,50,5))"
                                        t-as="line">
                                        <td>

                                            <span t-field="line.salary_rule_id.head"/>

                                        </td>
                                        <td colspan="3">
                                            <span t-field="line.name"/>
                                        </td>
                                        <!-- <td><span t-field="line.quantity"/></td>-->
                                        <!--                                            <td><span t-esc="line.amount"-->
                                        <!--                                                      t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/></td>-->
                                        <td>
                                            <span t-esc="line.total"
                                                  t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                        </td>

                                    </tr>
                                    <tr t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.salary_rule_id.sequence == 100)"
                                        t-as="line">
                                        <th colspan="4">Gross Pay and Allowances</th>
                                        <th>
                                            <span t-esc="line.total"
                                                  t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th colspan="5">Deductions</th>

                                    </tr>

                                    <tr style="font-size:12px;" t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.salary_rule_id.sequence ==150)"
                                        t-as="line">
                                        <td>

                                            <span t-field="line.salary_rule_id.head"/>

                                        </td>
                                        <td colspan="3">
                                            <span t-field="line.name"/>
                                        </td>
                                        <!-- <td><span t-field="line.quantity"/></td>-->
                                        <!--                                            <td><span t-esc="line.amount"-->
                                        <!--                                                      t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/></td>-->
                                        <td>
                                            <span t-esc="abs(line.total)"
                                                  t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                        </td>


                                    </tr>

                                    <tr>
                                        <th colspan="4">Total Deductions</th>
                                        <th>
                                           <span t-esc="abs(sum(line.total for line in o.line_ids.filtered(lambda line: line.appears_on_payslip and line.salary_rule_id.sequence ==150)))"  t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>

                                        </th>
                                    </tr>
                                    <tr t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.salary_rule_id.sequence ==200)"
                                        t-as="line">
                                        <th colspan="4">Net Payable Amount:</th>
                                        <th>
                                            <span t-esc="line.total"
                                                  t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                        </th>

                                    </tr>


                                </tbody>


                            </table>

                               <table class="table table-sm table-bordered" style="font-size:12px;">
                                <tr>
                                    <td>
                                        <strong>Paid into:</strong>
                                    </td>
                                    <td>
                                        None
                                    </td>

                                </tr>
                                    <tr>
                                    <td>
                                        <strong>Remarks:</strong>
                                    </td>
                                    <td>
                                         <span t-esc="o.date_from.strftime('%B/%Y')"/><br/>
                                        (Month Days: <t t-esc="(datetime.datetime.strptime(str(o.date_to), '%Y-%m-%d') -datetime.datetime.strptime(str(o.date_from), '%Y-%m-%d')).days+1" />
                                    </td>

                                </tr>
                               </table>

                            <p class="text-left" style="font-size:12px;">
                                <strong>Note: This is the System Generated Slip</strong><br/>
                                <strong>In Case of any errors/omissions,please contact Paybill Section</strong>
                            </p>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>